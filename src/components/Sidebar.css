/* === Sidebar.css — تصميم عالمي بمقاسات معتمدة === */
:root{
  --sb-width-open: 280px;
  --sb-width-rail: 72px;

  --sb-bg-from:#0b1220;
  --sb-bg-to:#101826;
  --sb-line:#2b3a4c;
  --sb-ink:#e5e7eb;
  --sb-muted:#94a3b8;
  --sb-accent:#10b981;
  --sb-accent-2:#34d399;
}

/* الحاوية */
.sb{
  position: fixed;
  inset-block-start: 0;
  inset-inline-start: 0;
  height: 100dvh;
  overflow-y: auto;
  background: linear-gradient(180deg,var(--sb-bg-from),var(--sb-bg-to));
  border-inline-end: 1px solid var(--sb-line);
  color: var(--sb-ink);
  box-shadow: 0 18px 40px -14px rgba(0,0,0,.6);
  transition: width .28s ease, padding .28s ease;
  padding: 12px;
  z-index: 1000;
}
.sb--open{ width: var(--sb-width-open); }
.sb--rail{ width: var(--sb-width-rail); }
.sb--hidden{ width: 0; padding: 0; overflow: hidden; border: 0; }

/* رأس الشريط */
.sb-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
.sb .brand{ display:flex; align-items:center; gap:10px; min-width:0; }
.sb .logo{ height:34px; width:34px; border-radius:10px; display:grid; place-items:center; color:#fff;
  background: linear-gradient(135deg,#10b981,#0ea5e9); box-shadow:0 6px 14px rgba(16,185,129,.25); }
.sb .meta .title{ font-weight:800; font-size:13px; line-height:1; white-space:nowrap; }
.sb .meta .sub{ font-size:11px; color:var(--sb-muted); }

.sb-toggle{
  height:32px; width:32px; display:grid; place-items:center;
  border-radius:8px; border:1px solid var(--sb-line);
  background:#0f172a; color:var(--sb-ink);
}
.sb-toggle:hover{ background:#121b31; }

/* بحث */
.sb-search{ margin:10px 0 6px; display:flex; align-items:center; gap:8px;
  padding:8px 10px; border:1px solid var(--sb-line); border-radius:12px; background:#0f172a; }
.sb-search input{ background:transparent; border:0; outline:none; color:var(--sb-ink); width:100%; }
.op70{ opacity:.7; }
.sb-sep{ height:1px; margin:10px 6px; background:linear-gradient(90deg,transparent,var(--sb-line),transparent); }

/* روابط */
.sb-nav{ display:flex; flex-direction:column; gap:6px; }

/* عنصر */
.sb-item{
  position:relative; 
  display:flex; 
  align-items:center; 
  gap:10px;
  height:44px; 
  padding:0 10px; 
  border-radius:12px; 
  text-decoration:none; 
  color:var(--sb-ink);
  border:1px solid transparent; 
  transition:background .18s ease, border-color .18s ease, transform .08s ease;
  background: #0f172a;   /* ✅ هذا السطر الجديد */
}

/* إضاءة لحظية لحظة الضغط/التركيز (وميض سريع) */
.sb-item:active,
.sb-item:focus-visible{
  background: linear-gradient(90deg, rgba(16,185,129,.14), rgba(52,211,153,.06));
  border-color: var(--sb-accent);
  color:#fff;
}

/* العنصر الفعّال */
.sb-item.is-active {
  background: linear-gradient(90deg, rgba(16,185,129,.15), rgba(52,211,153,.08));
  border-color: var(--sb-accent);
  color: #fff;
  box-shadow: inset 0 0 12px rgba(16,185,129,.25), 0 2px 8px rgba(0,0,0,.4);
  position: relative;
  overflow: hidden;
  transition: all .25s ease;
}

.sb-item.is-active::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  inset-inline-start: 0;
  width: 5px;
  border-radius: 0 4px 4px 0;
  background: linear-gradient(180deg, var(--sb-accent-2), var(--sb-accent));
  box-shadow: 0 0 12px rgba(52,211,153,.6);
}
.sb-item.is-active {
  animation: sbPulse .35s ease;
}
@keyframes sbPulse {
  0% { transform: scale(0.98); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
}

.sb-ico{
  height:34px; width:34px; border-radius:10px; display:grid; place-items:center;
  background:#0b1324; border:1px solid var(--sb-line); color:var(--sb-accent);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.sb-label{ font-weight:600; font-size:13px; line-height:1; white-space:nowrap; }

/* شريط تفعيل */
.sb-item .sb-active-bar{ position:absolute; inset-inline-start:6px; top:8px; bottom:8px; width:3px; border-radius:3px; background:transparent; }
.sb-item.is-active .sb-active-bar{ background:linear-gradient(180deg,var(--sb-accent-2),var(--sb-accent)); }

/* مجموعة فرعية */
.sb-group{ display:flex; flex-direction:column; gap:4px; }
.sb-sub{ margin-inline-start:8px; margin-top:4px; }
.sb-sub.is-rail{ margin:0; }

/* رابط فرعي */
.sb-sublink{
  position:relative; display:flex; align-items:center; gap:8px; height:34px; padding:0 10px; margin:2px 0;
  border-radius:10px; color:var(--sb-ink); text-decoration:none; border:1px solid transparent;
}
.sb-sublink:hover{ background:rgba(148,163,184,.06); border-color:rgba(148,163,184,.2); }

/* الفرعي الفعّال */
.sb-sublink.is-active {
  background: linear-gradient(90deg, rgba(16,185,129,.12), rgba(52,211,153,.05));
  border-color: var(--sb-accent-2);
  color: #fff;
  font-weight: 600;
  box-shadow: inset 0 0 8px rgba(16,185,129,.18);
  transition: all .25s ease;
}
.sb-sublink.is-active {
  background: linear-gradient(90deg, rgba(16,185,129,.12), rgba(52,211,153,.05));
  border-color: var(--sb-accent-2);
  color: #fff;
  font-weight: 600;
  box-shadow: inset 0 0 8px rgba(16,185,129,.18);
  transition: all .25s ease;
}

/* Tooltips عند rail */
.sb--rail .sb-item::after, .sb--rail .sb-sublink::after{
  content: attr(data-tip);
  position: absolute; left: calc(100% + 8px); top: 50%; transform: translateY(-50%) scale(.96);
  opacity: 0; pointer-events: none; white-space: nowrap;
  background:#0b1220; color:#f8fafc; border:1px solid var(--sb-line);
  border-radius:6px; padding:4px 8px; font-size:12px; box-shadow:0 12px 24px rgba(0,0,0,.35);
  transition: opacity .12s ease, transform .12s ease;
}
.sb--rail .sb-item:hover::after, .sb--rail .sb-sublink:hover::after{ opacity:1; transform: translateY(-50%) scale(1); }

/* تذييل */
.sb-foot{ margin-top:10px; border:1px solid var(--sb-line); background:rgba(1,1,1,.2); border-radius:12px; padding:10px; }
.sb-foot p{ margin:0; font-size:11px; color:var(--sb-muted); text-align:center; }

/* Scrollbar */
.sb::-webkit-scrollbar{ width:10px; }
.sb::-webkit-scrollbar-track{ background:transparent; }
.sb::-webkit-scrollbar-thumb{ background:#1f2937; border:2px solid #0f172a; border-radius:10px; }
.sb::-webkit-scrollbar-thumb:hover{ background:#243040; }

/* === وضع RAIL: أيقونات فقط === */
.sb--rail .meta,
.sb--rail .sb-label,
.sb--rail .sb-sep,
.sb--rail .sb-foot,
.sb--rail .sb-sub,
.sb--rail .sb-search { display:none !important; }
.sb--rail .sb-item{ justify-content:center; gap:0; padding:0; }
.sb--rail .sb-ico{ margin:0 auto; }



/* زر ملوّن (Accent) */
.sb-item.is-accent {
  background: rgba(34, 197, 94, 0.10);
  border: 1px solid rgba(34, 197, 94, 0.35);
  color: #a7f3d0;
}
.sb-item.is-accent:hover {
  background: rgba(34, 197, 94, 0.18);
}
.sb-item.is-accent.is-active {
  background: rgba(34, 197, 94, 0.25);
  color: #eafff4;
}
.sb-item.is-accent .sb-active-bar {
  background: #22c55e; /* الأخضر */
}
/* ==== Responsive Modal that respects the sidebar width ==== */

/* هذه متغيّرات العرض الافتراضية للشريط */
:root{
  --sb-open-w: 300px;   /* عرض الشريط عندما يكون مفتوحاً */
  --sb-rail-w:  84px;   /* عرض شريط الـ rail */
  --sb-hidden-w: 0px;   /* مخفي */
  --modal-hpad: 24px;   /* هوامش جانبية للـ modal */
}

/* Sidebar.jsx يضع data-sb على <html> = open | rail | hidden */
html[data-sb="open"]  { --sb-w: var(--sb-open-w); }
html[data-sb="rail"]  { --sb-w: var(--sb-rail-w); }
html[data-sb="hidden"]{ --sb-w: var(--sb-hidden-w); }

/* الغطاء */
.ap-modal {
  position: fixed;
  inset: 0;
  z-index: 60; /* فوق الشريط */
  display: grid;
  place-items: center;
  background: rgba(10, 14, 25, .55); /* تظليل الخلفية */
  backdrop-filter: blur(2px);
  padding: 20px; /* تنفّس على الحواف */
}

/* اللوحة */
.ap-modal__panel{
  width: 100%;
  /* العرض الأقصى يحترم الشريط الجانبي + هوامش المودال */
  max-width: calc(100vw - var(--sb-w) - (var(--modal-hpad) * 2));
  /* بدل السطر أعلاه يمكنك استعمال clamp لضمان حد أدنى/أقصى أنيق: */
  max-width: clamp(320px,
                   calc(100vw - var(--sb-w) - (var(--modal-hpad) * 2)),
                   980px);

  border-radius: 16px;
  background: #0f1729;               /* لون اللوحة */
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 24px 80px rgba(0,0,0,.35);
  overflow: hidden;
}

/* جسم اللوحة الداخلي */
.ap-modal__body{
  padding: 18px;
  max-height: min(84vh, 860px);
  overflow: auto;
}

/* رأس اللوحة (عنوان + إغلاق) — اختياري */
.ap-modal__head{
  display: flex; align-items: center; gap: 8px;
  padding: 14px 18px;
  background: linear-gradient(90deg,#5B65F6 0%, #7B4DE3 50%, #1BAF6B 100%);
  color: #fff; font-weight: 700;
}
.ap-modal__close{
  margin-inline-start: auto;
  appearance: none;
  border: 0; background: transparent; color: #fff;
  opacity: .9; cursor: pointer;
}

/* شبكة الحقول داخل الفورم: عمودان على الشاشات العريضة، عمود على الضيقة */
.ap-form-grid{
  display: grid;
  grid-template-columns: repeat(2, minmax(260px, 1fr));
  gap: 12px;
}
@media (max-width: 880px){
  .ap-form-grid{ grid-template-columns: 1fr; }
}

/* حقول/تلميحات الجماليات */
.ap-field{
  display: flex; flex-direction: column; gap: 6px;
}
.ap-field label{
  font-size: 13px; color: #cbd5e1;
}
.ap-field input, .ap-field select, .ap-field textarea{
  width: 100%;
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.08);
  color: #e5e7eb;
  padding: 10px 12px;
  border-radius: 10px;
  outline: none;
}
.ap-field input::placeholder,
.ap-field textarea::placeholder{ color: #8ea0b6; }

/* أزرار أسفل المودال */
.ap-modal__actions{
  display: flex; gap: 10px; justify-content: flex-end;
  padding: 12px 18px 18px;
  border-top: 1px solid rgba(255,255,255,.06);
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent);
}
.ap-btn{ padding: 10px 14px; border-radius: 10px; border: 0; cursor: pointer; }
.ap-btn--primary{ background:#16A34A; color:#fff; }
.ap-btn--ghost{ background:transparent; color:#cbd5e1; border:1px solid rgba(255,255,255,.12); }

/* اختيار متعدد منسدِل أنيق (لو كنت تستعمله للمرحلة/الفئات) */
.ap-multiselect{
  position: relative;
}
.ap-multiselect__trigger{
  display:flex; align-items:center; justify-content:space-between;
  width:100%; padding:10px 12px; border-radius:10px;
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.08);
  color:#e5e7eb; cursor:pointer;
}
.ap-multiselect__menu{
  position:absolute; inset-inline:0; top: calc(100% + 6px);
  background:#0b1220; border:1px solid rgba(255,255,255,.08);
  border-radius:12px; padding:8px; z-index: 61; /* فوق panel */
  max-height: 260px; overflow:auto;
  box-shadow: 0 12px 40px rgba(0,0,0,.35);
}
.ap-multiselect__item{
  display:flex; align-items:center; gap:8px; padding:8px 10px;
  color:#e5e7eb; border-radius:8px; cursor:pointer;
}
.ap-multiselect__item:hover{ background: rgba(255,255,255,.05); }
